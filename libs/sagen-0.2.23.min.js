/**
 * Sagen.js
 * device detector and viewport rewrite
 *
 * Licensed under The MIT License (MIT).
 *
 * Copyright (c) 2013 - 2015 taikiken
 * @author taikiken from http://inazumatv.com
 * hosted on https://github.com/taikiken/Sagen.js
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * inspired by device.js http://matthewhudson.me/projects/device.js/
 * Copyright (c) 2013 Matthew Hudson
 *
 * EventDispatcher class from CreateJS http://www.createjs.com/#!/CreateJS
 * Copyright (c) 2010 gskinner.com, inc.
 * modified by @taikiken
 *
*/var Sagen={};!function(a,b){"use strict";String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),b.hasClass=function(a,b){var c;return c=new RegExp(b,"i"),!!a.className.match(c)},b.addClass=function(a,c){if(!b.hasClass(a,c)){var d=a.className,e="";return""!==d&&(e=" "),a.className+=e+c}},b.removeClass=function(a,c){return b.hasClass(a,c)?(a.className=a.className.replace(c,"").trim().split("  ").join(" "),a.className):void 0};var c=function(a){var b=a.document,c=b.getElementById("sagen"),d=!1,e=!1,f=!1,g=!1,h=!1,i=!1,j=!1;if(c)if("undefined"!=typeof c.dataset)"undefined"!=typeof c.dataset.orientation&&(d="true"===c.dataset.orientation.toLowerCase()),"undefined"!=typeof c.dataset.android&&(e="true"===c.dataset.android.toLowerCase()),"undefined"!=typeof c.dataset.ios&&(f="true"===c.dataset.ios.toLowerCase()),"undefined"!=typeof c.dataset.canvas&&(g="true"===c.dataset.canvas.toLowerCase()),"undefined"!=typeof c.dataset.browser&&(h="true"===c.dataset.browser.toLowerCase()),"undefined"!=typeof c.dataset.transition&&(i="true"===c.dataset.transition.toLowerCase()),"undefined"!=typeof c.dataset.transform&&(j="true"===c.dataset.transform.toLowerCase());else for(var k,l,m=c.attributes,n=m.length;--n>=0;)k=m[n],l=k.nodeName.toLowerCase(),"data-orientation"===l?d="true"===k.nodeValue.toLowerCase():"data-android"===l?e="true"===k.nodeValue.toLowerCase():"data-ios"===l?f="true"===k.nodeValue.toLowerCase():"data-canvas"===l?g="true"===k.nodeValue.toLowerCase():"data-browser"===l?h="true"===k.nodeValue.toLowerCase():"data-transition"===l?i="true"===k.nodeValue.toLowerCase():"data-transform"===l&&(j="true"===k.nodeValue.toLowerCase());return{orientation:d,android:e,ios:f,canvas:g,browser:h,transition:i,transform:j}}(a);b.orientation=function(){return c.orientation},b.android=function(){return c.android},b.ios=function(){return c.ios},b.canvas=function(){return c.canvas},b.browser=function(){return c.browser},b.transition=function(){return c.transition},b.transform=function(){return c.transform}}(window,Sagen),function(a){"use strict";var b=a.build=a.build||{};b.version="0.2.23",b.buildDate="Fri, 27 Feb 2015 11:10:36 GMT"}(this.Sagen),function(a,b){"use strict";var c=function(){this.initialize()},d=c.prototype;d.constructor=c,c.initialize=function(a){a.addEventListener=d.addEventListener,a.removeEventListener=d.removeEventListener,a.removeAllEventListeners=d.removeAllEventListeners,a.hasEventListener=d.hasEventListener,a.dispatchEvent=d.dispatchEvent},d._listeners=null,d.initialize=function(){},d.addEventListener=function(a,b){var c=this._listeners;c?this.removeEventListener(a,b):c=this._listeners={};var d=c[a];return d||(d=c[a]=[]),d.push(b),b},d.removeEventListener=function(a,b){var c=this._listeners;if(c){var d=c[a];if(d)for(var e=0,f=d.length;f>e;e++)if(d[e]===b){1===f?delete c[a]:d.splice(e,1);break}}},d.removeAllEventListeners=function(a){a?this._listeners&&delete this._listeners[a]:this._listeners=null},d.dispatchEvent=function(a,b){var c=!1,d=this._listeners;if(a&&d){"string"==typeof a&&(a={type:a});var e=d[a.type];if(!e)return c;a.target=b||this,e=e.slice();for(var f=0,g=e.length;g>f;f++){var h=e[f];c=h.handleEvent?c||h.handleEvent(a):c||h(a)}}return!!c},d.hasEventListener=function(a){var b=this._listeners;return!(!b||!b[a])},d.toString=function(){return"[EventDispatcher]"},b.EventDispatcher=c}(window,this.Sagen||{}),function(a,b){"use strict";var c=function(a,b){"undefined"==typeof b||null===b?b=[]:Array.isArray(b)||(b=[b]),this.type=a,this.params=b},d=c.prototype;d.constructor=c,d.getParams=function(){return this.params},b.EventObject=c}(window,this.Sagen||{}),function(a,b){"use strict";function c(){var a,b=[-1,0,0];return x&&(a=k.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),b=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]),b}function d(){var a,b=[-1,0,0];return y&&(a=k.appVersion.match(/Android (\d+)\.(\d+)\.?(\d+)?/),b=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)],N=parseFloat(b[0]+"."+b[1]+b[2])),b}function e(){var a,b;return a=k.appVersion.match(/Version\/(\d+)\.(\d+)\.?(\d+)?/),b=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)],L=parseFloat(b[0]+"."+b[1]+b[2]),b}function f(){var a,b;return a=k.appVersion.match(/Chrome\/(\d+)\.(\d+)\.(\d+)\.?(\d+)?/),b=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseInt(a[4],10)],b.join(".")}var g,h,i,j,k=a.navigator,l=k.userAgent,m=!!l.match(/msie [6]/i),n=!!l.match(/msie [7]/i),o=!!l.match(/msie [8]/i),p=!!l.match(/msie [9]/i),q=!!l.match(/msie [10]/i),r=!!l.match(/trident\/[7]/i)&&!!l.match(/rv:[11]/i),s=!!l.match(/msie/i)||r,t=m||n||o,u=!!l.match(/ipad/i),v=!!l.match(/ipod/i),w=!!l.match(/iphone/i)&&!u&&!v,x=u||v||w,y=!!l.match(/android/i),z=x||y,A=!!l.match(/chrome/i),B=!!l.match(/firefox/i),C=!!l.match(/safari/i),D=y&&C&&!!l.match(/version/i),E=!!l.match(/windows/i),F=!!l.match(/mac os x/i),G="undefined"!=typeof a.ontouchstart,H="undefined"!=typeof k.standalone?k.standalone:!1,I=!1,J=!1,K=-1,L=-1,M=[-1,0,0],N=-1,O=-1,P=!!a.CanvasRenderingContext2D;y&&(I=!!l.match(/mobile/i),I||(J=!0)),D&&(A=!1,C=!1),A&&(C=!1),g=c(),h=d(),C&&(M=e()),A&&(O=f()),i=function(){var a=document.createElement("p").style;return"transition"in a||"WebkitTransition"in a||"MozTransition"in a||"msTransition"in a||"OTransition"in a}(),j=function(){var a=document.createElement("p").style;return"transform"in a||"WebkitTransform"in a||"MozTransform"in a||"OTransform"in a||"msTransform"in a}();var Q=function(){throw"Browser cannot be instantiated"};Q={iOS:{is:function(){return x},number:function(){return g},major:function(){return g[0]},version:function(){return K},iPhone:function(){return w},iPad:function(){return u},iPod:function(){return v},fullScreen:function(){return H}},Android:{is:function(){return y},number:function(){return h},major:function(){return h[0]},version:function(){return N},phone:function(){return I},tablet:function(){return J},standard:function(){return D}},IE:{is:function(){return s},is6:function(){return m},is7:function(){return n},is8:function(){return o},is9:function(){return p},is10:function(){return q},is11:function(){return r},legacy:function(){return t},version:function(){var a=-1;return r?a=11:q?a=10:p?a=9:o?a=8:n?a=7:m&&(a=6),a}},Chrome:{is:function(){return A},version:function(){return O}},Safari:{is:function(){return C},number:function(){return M},major:function(){return M[0]},version:function(){return L}},Firefox:{is:function(){return B}},Touch:{is:function(){return G}},Mobile:{is:function(){return z},hideURLBar:function(){setTimeout(function(){scrollBy(0,1)},0)},phone:function(){return v||w||I},tablet:function(){return u||J}},Canvas:{is:function(){return P},webgl:function(){if(!P)return!1;try{return!!a.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(b){return!1}}},Mac:{is:function(){return F}},Windows:{is:function(){return E}},Transition:{is:function(){return i}},Transform:{is:function(){return j}}},b.Browser=Q}(window,this.Sagen||{}),function(a,b){"use strict";function c(){var c,e,f,g,h=[];n.is()?(n.iPad()?(h.push("ios"),h.push("ipad"),h.push("tablet")):n.iPod()?(h.push("ios"),h.push("ipod"),h.push("mobile")):n.iPhone()&&(h.push("ios"),h.push("iphone"),h.push("mobile")),n.fullScreen()&&h.push("standalone"),c=n.number(),h.push("ios"+c.join("")),h.push("ios"+c[0]),h.push("ios"+c[0]+c[1])):o.is()?(o.phone()?(h.push("android"),h.push("mobile")):o.tablet()&&(h.push("android"),h.push("tablet"),a.innerWidth>=1024&&a.innerHeight>=1024&&h.push("tablet-hd")),c=o.number(),h.push("android"+c.join("")),h.push("android"+c[0]),h.push("android"+c[0]+c[1])):(h.push("other"),w=!0),m.Touch.is()&&h.push("touch"),s&&h.push("orientation-change"),t&&h.push("orientation"),b.browser()&&(m.IE.is()?(e=m.IE.version(),h.push("ie"),h.push("ie"+e)):m.Chrome.is()?(e=m.Chrome.version()+"",f=e.split("."),g=f.shift(),h.push("chrome"),h.push("chrome"+g),h.push("chrome"+e.split(".").join("_"))):m.Safari.is()?(e=m.Safari.version()+"",f=e.split("."),g=f.shift(),h.push("safari"),h.push("safari"+g),h.push("safari"+e.split(".").join("_"))):m.Firefox.is()&&h.push("firefox"),m.Mac.is()&&h.push("mac"),m.Windows.is()&&h.push("windows")),b.transition()&&m.Transition.is()&&h.push("transition"),b.transform()&&m.Transform.is()&&h.push("transform"),d(h.join(" "))}function d(a){b.addClass(v,a)}function e(a){b.removeClass(v,a)}function f(){var b=parseInt(a.innerWidth||k.documentElement.clientWidth||k.body.clientWidth,10),c=parseInt(a.innerHeight||k.documentElement.clientHeight||k.body.clientHeight,10);return c>b}function g(){return 90!==l(a.orientation)}function h(){return 90===l(a.orientation)}function i(){var a;f()?(e("landscape"),d("portrait"),a="portrait"):(e("portrait"),d("landscape"),a="landscape"),z._onOrientation(a)}function j(){function b(){e("landscape"),d("portrait"),f="portrait"}function c(){e("portrait"),d("landscape"),f="landscape"}if(!t)return void i();var f="";y?a.matchMedia("(orientation: portrait)").matches?b():c():g()?b():h()&&c(),z._onOrientation(f)}var k=a.document,l=a.Math.abs,m=b.Browser,n=m.iOS,o=m.Android,p=m.Canvas,q=b.EventDispatcher,r=b.EventObject,s="onorientationchange"in a,t="orientation"in a,u=s?"orientationchange":"resize",v=k.documentElement,w=!1,x=b.orientation(),y="undefined"!=typeof a.matchMedia,z=function(){throw"Device cannot be instantiated"};z.CHANGE_ORIENTATION="changeOrientation",q.initialize(z),z._onOrientation=function(a){z.dispatchEvent(new r(z.CHANGE_ORIENTATION,[a]),this)},z.listen=function(){"undefined"==typeof a.addEventListener||w||a.addEventListener(u,j,!1)},z.abort=function(){a.removeEventListener(u,j)},z.portrait=function(){return g()},z.landscape=function(){return h()},z.canvas=function(){p.is()&&(d("canvas"),p.webgl()&&d("webgl"))},z.fire=function(){x&&!w&&j()},z.getElement=function(){return v},b.Device=z,c(),w?x=!1:j(),x&&!w&&z.listen(),b.canvas()&&z.canvas()}(window,this.Sagen||{}),function(a,b){"use strict";function c(a){var b=f.createElement("meta");return b.name="viewport",b.content=a,d=b,b}var d,e,f=a.document,g=b.Browser;!function(){"undefined"!=typeof f.querySelector&&(d=f.querySelector("meta[name='viewport']"),d&&(e=d.content))}();var h=function(){throw"Viewport cannot be instantiated"};if(h.add=function(a){d&&e&&a&&(d.content=d.content+", "+a)},h.replace=function(a,b){b=b||"",d&&e&&a&&(d.content=d.content.split(a).join(b))},h.write=function(a){f.getElementsByTagName("head")[0].appendChild(c(a))},h.rewrite=function(a){d.content=a},h.Android={targetDensity:function(){h.add("target-densitydpi=device-dpi")}},h.iOS={minimalUI:function(){h.add("minimal-ui")}},h.getMeta=function(){return d},b.Viewport=h,b.android()&&!g.Chrome.is()&&g.Android.is()&&h.Android.targetDensity(),b.ios()){var i=g.iOS.version();g.iOS.is()&&i>=7.1&&8>i&&h.iOS.minimalUI()}}(window,this.Sagen||{});